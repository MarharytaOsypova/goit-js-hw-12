{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":[" import axios from 'axios';\n\nconst API_KEY = \"46831660-d1aa08367accf9e9e1755dc5b\";\n \nconst BASE_URL = \"https://pixabay.com/api/\";\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page,\n                per_page: PER_PAGE,\n            },\n        });\n\n        if (response.data.hits.length === 0) {\n            return { images: [], totalHits: 0 };\n        }\n\n        return { images: response.data.hits, totalHits: response.data.totalHits };\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    }\n}\n\n     ","\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    \n\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <div class=\"photo-card\">\n            <a href=\"${largeImageURL}\" data-lightbox=\"image\" data-title=\"${tags}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p><b>Likes:</b> ${likes}</p>\n                <p><b>Views:</b> ${views}</p>\n                <p><b>Comments:</b> ${comments}</p>\n                <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n        </div>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);   \n}","import { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n \nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\nsearchForm.addEventListener('submit', onSearchSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearchSubmit(event) {\n    event.preventDefault();\n    currentQuery = searchForm.elements.query.value.trim();\n    if (!currentQuery) {\n        iziToast.error({ title: 'Error', message: 'Please enter a search term.' });\n        return;\n    }\n    currentPage = 1;\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n\n    try {\n        const { images, totalHits: hits } = await fetchImages(currentQuery, currentPage);\n        totalHits = hits;\n\n        gallery.innerHTML = '';\n        if (images.length === 0) {\n            \n            iziToast.info({ title: 'Info', message: 'No images matching your search query. Try again!' });\n            return;\n        }\n\n        renderImages(images);\n        lightbox.refresh();\n        loader.style.display = 'none';\n\n        if (currentPage * 15 < totalHits) {\n            loadMoreBtn.style.display = 'block';\n        } else {\n            iziToast.info({ title: 'Info', message: \"You've reached the end of the results.\" });\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again.' });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\nasync function onLoadMore() {\n    loader.style.display = 'block';\n    currentPage += 1;\n\n    try {\n        const { images } = await fetchImages(currentQuery, currentPage);\n\n        if (images.length === 0) {\n            iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n            loadMoreBtn.style.display = 'none';\n            return;\n        }\n\n        renderImages(images);\n        lightbox.refresh();\n        setTimeout(smoothScroll, 100);\n\n        if (currentPage * 15 >= totalHits) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n    } catch (error) {\n        iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again.' });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\n\n\nfunction smoothScroll() {\n    const firstCard = document.querySelector('.gallery .photo-card');\n    if (firstCard) {\n        const cardHeight = firstCard.getBoundingClientRect().height;\n        window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n}"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","response","axios","error","renderImages","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","currentPage","currentQuery","totalHits","searchForm","loadMoreBtn","loader","lightbox","SimpleLightbox","onSearchSubmit","onLoadMore","event","iziToast","hits","smoothScroll","firstCard","cardHeight"],"mappings":"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"}